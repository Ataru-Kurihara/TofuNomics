# TofuNomics タスク完了時チェックリスト

## コード実装完了後の必須タスク

### 1. コード品質チェック

#### コンパイル確認
```bash
# コンパイルエラーがないことを確認
mvn clean compile
```

#### テスト実行
```bash
# 全テスト成功を確認
mvn test

# テストカバレッジ確認
mvn test jacoco:report
open target/site/jacoco/index.html
```

#### ビルド確認
```bash
# 最終的なJARファイル生成確認
mvn clean package
ls -la target/*.jar
```

### 2. コードスタイル確認

#### 命名規則チェック
- [ ] クラス名が適切な命名規則に従っている
- [ ] メソッド名がcamelCaseになっている
- [ ] 定数がUPPER_SNAKE_CASEになっている
- [ ] パッケージ構成が適切である

#### コード構造チェック
- [ ] 適切なアクセス修飾子が使用されている
- [ ] JavaDocコメントが重要なメソッドに記述されている
- [ ] 例外処理が適切に実装されている
- [ ] リソース管理（try-with-resources）が適切に実装されている

### 3. 機能テスト

#### 基本機能確認
- [ ] 新機能が要件通りに動作する
- [ ] 既存機能に影響を与えていない
- [ ] エラーケースが適切に処理されている
- [ ] パフォーマンスに問題がない

#### 統合テスト
- [ ] 他のシステムとの連携が正常に動作する
- [ ] データベースの整合性が保たれている
- [ ] 設定ファイルの変更が適切に反映される

### 4. ドキュメント更新

#### コードコメント
- [ ] 複雑なロジックにコメントを追加
- [ ] TODOコメントが残っていない
- [ ] 外部仕様への参照が明記されている

#### 設定ドキュメント
- [ ] 新しい設定項目がconfig.ymlに追加されている
- [ ] デフォルト値が適切に設定されている
- [ ] 設定の説明コメントが記述されている

### 5. パフォーマンス確認

#### メモリ使用量
- [ ] メモリリークが発生していない
- [ ] キャッシュサイズが適切に制限されている
- [ ] 不要なオブジェクトが適切に解放されている

#### 処理速度
- [ ] 重い処理が非同期で実行されている
- [ ] データベースアクセスが最適化されている
- [ ] ボトルネックとなる処理がない

### 6. セキュリティチェック

#### 入力検証
- [ ] ユーザー入力が適切に検証されている
- [ ] SQLインジェクション対策が実装されている
- [ ] 権限チェックが適切に行われている

#### データ保護
- [ ] 機密情報がログに出力されていない
- [ ] プレイヤーデータがUUIDで管理されている
- [ ] データの整合性が保護されている

### 7. エラーハンドリング

#### 例外処理
- [ ] 適切な例外処理が実装されている
- [ ] エラーメッセージが分かりやすい
- [ ] ログレベルが適切に設定されている
- [ ] フォールバック処理が実装されている

#### 回復処理
- [ ] 一時的な障害から回復できる
- [ ] データ不整合時の対応が実装されている
- [ ] プラグインリロードが正常に動作する

### 8. 最終確認事項

#### ビルド・配布
- [ ] 依存関係が適切に設定されている
- [ ] JARファイルのサイズが妥当である
- [ ] plugin.ymlの設定が正しい
- [ ] 必要なリソースファイルが含まれている

#### バージョン管理
- [ ] コミットメッセージが分かりやすい
- [ ] 変更内容が実装計画に反映されている
- [ ] バージョン番号が適切に更新されている

## コマンド実行チェックリスト

### 開発中の定期実行コマンド
```bash
# 1. コンパイルチェック
mvn clean compile

# 2. テスト実行
mvn test

# 3. パッケージ作成
mvn clean package

# 4. 依存関係確認
mvn dependency:tree
```

### 品質チェックコマンド
```bash
# カバレッジレポート生成
mvn test jacoco:report

# テスト結果確認
ls target/surefire-reports/*.txt

# エラー詳細出力
mvn clean compile -X -e
```

### 最終リリース前チェック
```bash
# 最終ビルド
mvn clean package

# JARファイル確認
ls -la target/TofuNomics-*.jar

# 設定ファイル確認
cat src/main/resources/plugin.yml
```

## 緊急時対応

### ビルド失敗時
```bash
# Maven キャッシュクリア
mvn clean install -U

# 依存関係の強制更新
mvn dependency:purge-local-repository

# 詳細エラー確認
mvn clean compile -X > build.log 2>&1
```

### テスト失敗時
```bash
# 特定テストのみ実行
mvn test -Dtest=ClassName

# テスト詳細ログ確認
cat target/surefire-reports/TEST-*.xml

# テストスキップビルド（緊急時のみ）
mvn clean package -DskipTests
```

## 品質基準

### 必須達成基準
- **コンパイルエラー**: 0件
- **テスト成功率**: 100%
- **主要機能のテストカバレッジ**: 80%以上
- **クリティカルなバグ**: 0件

### 推奨達成基準
- **全体テストカバレッジ**: 70%以上
- **JavaDoc記述率**: 主要クラス・メソッド90%以上
- **TODO残存**: 0件（次バージョン向けは除く）
- **警告レベルログ**: 最小限

この チェックリストに従って、すべての開発タスク完了時に品質を確保してください。